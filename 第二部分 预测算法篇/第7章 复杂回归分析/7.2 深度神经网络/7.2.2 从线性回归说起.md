```python
import pandas as pd
import numpy as np
from sklearn.model_selection import train_test_split

# 准备基础数据
iris = pd.read_csv("iris.csv")
x,y = iris.drop(columns=['Species','Petal.Width']),iris['Petal.Width']

# 标准化处理
x = x.apply(lambda v:(v-np.mean(v))/np.std(v))
x = np.c_[[1]*x.shape[0],x]
x_train, x_test, y_train, y_test = train_test_split(x, y, test_size=0.33, random_state=1)

# 初始化精度控制参数ε
epsilon = 4.0

# 初始化学习效率α
alpha = 0.005

# 精度控制变量d
d = epsilon + 1

# 用适当小的随机数初始化权向量 W
w = np.random.uniform(0,1,4)

while d >= epsilon:
    d = 0
    for i in range(x_train.shape[0]):
        xi = x_train[i,:]
        delta = np.sum(w*xi) - y_train.values[i]
        w = w - alpha*delta*xi
        d = d + delta**2
        
    print(d)
# 66.86549781394255
# 26.873553725350185
# ......
# 4.0241010398100885
# 3.9844824194932182
```

```python
w
# array([ 1.19918387, -0.05429913,  0.06292586,  0.80169231])

np.sum((y_test - np.sum(x_test*w,axis=1))**2)
# 1.8217475510303391
```